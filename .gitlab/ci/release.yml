# Create Release on GitLab and GitHub (via goreleaser)
release:goreleaser:
  stage: release
  image:
    name: goreleaser/goreleaser:latest
    entrypoint: [""]
  variables:
    GIT_DEPTH: 0 # Required for changelog generation
  script:
    - cd apps/cli
    - goreleaser release --clean
  artifacts:
    paths:
      - apps/cli/dist/releases.json
  rules:
    - if: $CI_COMMIT_TAG
